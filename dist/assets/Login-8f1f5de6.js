import{b,d as f,r as w,e as y,a as v,f as N,j as a}from"./index-d4e5aba6.js";const L=b.injectEndpoints({endpoints:r=>({login:r.mutation({query:o=>({url:"/admin/login",method:"POST",body:o}),async onQueryStarted(o,{queryFulfilled:d,dispatch:i}){var t,c,l;try{const e=await d;(t=e==null?void 0:e.data)!=null&&t.success&&(localStorage.setItem("eManager_jwt",(c=e==null?void 0:e.data)==null?void 0:c.token),i(f({token:(l=e==null?void 0:e.data)==null?void 0:l.token,data:e==null?void 0:e.data})))}catch{}}})})}),{useLoginMutation:S}=L,M=()=>{var m,p;const[r,o]=w.useState(""),[d,{isLoading:i}]=S(),{loggedUser:t}=y(n=>n.user),c=v(),e=((p=(m=N().state)==null?void 0:m.from)==null?void 0:p.pathname)||"/";(t!=null&&t.success||t!==void 0)&&c(e,{replace:!0});const x=async n=>{var u;n.preventDefault();const g=n.target.email.value,h=n.target.password.value,j={email:g,password:h};try{const s=await d(j).unwrap();s!=null&&s.success&&n.target.reset(),o("")}catch(s){console.log(s),o((u=s==null?void 0:s.data)==null?void 0:u.error)}};return a.jsx("section",{className:"flex items-center justify-center w-full min-h-screen bg-gray-100",children:a.jsxs("div",{className:"bg-base-100 rounded shadow w-[90%] sm:w-[400px] py-5",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsx("h3",{className:"font-semibold text-xl text-primary text-center ",children:"Admin Login"})}),a.jsxs("form",{onSubmit:x,className:"flex flex-col gap-3 p-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"mb-1",children:"Email"}),a.jsx("input",{type:"email",name:"email",placeholder:"Your Email",required:!0})]}),a.jsxs("div",{children:[a.jsx("p",{className:"mb-1",children:"Password"}),a.jsx("input",{type:"password",name:"password",placeholder:"Your Password",required:!0})]}),r&&a.jsx("p",{className:"text-sm text-red-500",children:r}),a.jsx("div",{children:a.jsx("button",{disabled:i&&"disabled",type:"submit",className:"gradient-primary-btn w-full mt-2",children:i?"Loading...":"Login"})})]})]})})};export{M as default};
