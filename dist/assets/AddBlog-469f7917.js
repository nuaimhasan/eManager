import{r as d,a as b,j as e}from"./index-d4e5aba6.js";import{J as N}from"./jodit-react-3533568c.js";import{a as v}from"./index.esm-d3631ea6.js";import{_ as w}from"./index-a51c96a6.js";import{S as o}from"./sweetalert2.all-0db675b4.js";import{b as y}from"./blogApi-686a2312.js";import"./iconBase-12a6ae7e.js";function I(){const h=d.useRef(null),[s,n]=d.useState([]),[c,m]=d.useState(""),[p,u]=d.useState(""),g=b(),[j,{isLoading:x}]=y(),f=async t=>{var i,l;t.preventDefault();const r=new FormData;if(r.append("title",p),r.append("description",c),!((i=s[0])!=null&&i.file))return o.fire({icon:"error",title:"",text:"Please provide blog image"});r.append("image",(l=s[0])==null?void 0:l.file);try{const a=await j(r).unwrap();a!=null&&a.success&&(u(""),m(""),n([]),o.fire({icon:"success",title:"",text:"Blog add Success"}),g("/admin/blogs/all-blogs"))}catch(a){console.log(a),o.fire({icon:"error",title:"",text:"Something went wrong!"})}};return e.jsxs("section",{className:"bg-base-100 rounded shadow",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-medium text-neutral",children:"Add Blogs"})}),e.jsxs("form",{onSubmit:f,className:"p-4",children:[e.jsxs("div",{className:"text-neutral-content grid sm:grid-cols-2 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",required:!0,defaultValue:p,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx(w,{defaultValue:s,onChange:t=>n(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:r,dragProps:i})=>e.jsxs("div",{className:"border rounded border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:t,className:"w-max px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(s==null?void 0:s.length)>0&&"mt-4"} `,children:s==null?void 0:s.map((l,a)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:l.data_url,alt:"",className:"w-32 h-20"}),e.jsx("div",{onClick:()=>r(a),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx(v,{})})]},a))})]})})})]})]}),e.jsxs("div",{className:"md:col-span-2 border rounded",children:[e.jsx("p",{className:"border-b p-3",children:"Description"}),e.jsx("div",{className:"p-4 about_details",children:e.jsx(N,{ref:h,value:c,onBlur:t=>m(t)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{disabled:x&&"disabled",className:"gradient-primary-btn",children:x?"Loading":"Add Blog"})})]})]})}export{I as default};
