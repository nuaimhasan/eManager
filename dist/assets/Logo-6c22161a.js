import{r as y,j as e}from"./index-d4e5aba6.js";import{a as v}from"./index.esm-d3631ea6.js";import{_ as w}from"./index-a51c96a6.js";import{S as d}from"./sweetalert2.all-0db675b4.js";import{S}from"./Spinner-241108b6.js";import{u as C,a as U,b as _}from"./logoApi-5b60034a.js";import"./iconBase-12a6ae7e.js";function R(){var g,x,f;const{data:a,isLoading:j}=C(),[r,c]=y.useState([]),[b,{isLoading:u}]=U(),[L,{isLoading:p}]=_();if(j)return e.jsx(S,{});const m=(g=a==null?void 0:a.data[0])==null?void 0:g._id,N=async()=>{var l,n,i,h;let o=(l=r[0])==null?void 0:l.file;if(!o)return d.fire("","Logo is Recuired","error");const t=new FormData;if(t.append("logo",o),m)try{await b({id:m,formData:t}).unwrap(),d.fire("","Logo Updated Successfully","success"),c([])}catch(s){d.fire("",`${(n=s==null?void 0:s.data)==null?void 0:n.error}`,"error")}else{const s=await L(t).unwrap();s!=null&&s.success?(c([]),d.fire("","Logo Added Successfully","success")):d.fire("",`${(h=(i=s==null?void 0:s.error)==null?void 0:i.data)==null?void 0:h.error}`,"error")}};return e.jsxs("section",{children:[e.jsx("div",{className:"p-4 border-b bg-base-100 rounded",children:e.jsx("h1",{className:"font-medium text-neutral",children:"Logo Setting"})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6 mt-4",children:e.jsxs("div",{className:"bg-base-100 rounded shadow",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-neutral-content border-b p-3",children:["Logo ",e.jsx("small",{children:"(160px/60px)"})]}),e.jsxs("div",{className:"p-4 sm:flex items-center gap-4",children:[e.jsx(w,{defaultValue:r,onChange:o=>c(o),dataURLKey:"data_url",children:({onImageUpload:o,onImageRemove:t,dragProps:l})=>e.jsxs("div",{className:"border rounded border-dashed p-4 w-max",...l,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:o,className:"px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(r==null?void 0:r.length)>0&&"mt-4"} `,children:r==null?void 0:r.map((n,i)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:n.data_url,alt:"",className:"w-40"}),e.jsx("div",{onClick:()=>t(i),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx(v,{})})]},i))})]})}),((x=a==null?void 0:a.data[0])==null?void 0:x.logo)&&e.jsx("img",{src:`https://emanager-api.emanagerit.com/logo/${(f=a==null?void 0:a.data[0])==null?void 0:f.logo}`,alt:"",className:"w-32 mt-4"})]})]}),e.jsx("div",{className:"flex justify-end mt-6 border-t p-4",children:e.jsx("button",{disabled:(u||p)&&"disabled",onClick:N,className:"gradient-primary-btn",children:u||p?"Loading...":m?"Update":"Add"})})]})})]})}export{R as default};
