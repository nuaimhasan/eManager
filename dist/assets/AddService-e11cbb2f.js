import{r as i,a as I,j as e}from"./index-d4e5aba6.js";import{J as _}from"./jodit-react-3533568c.js";import{a as S}from"./index.esm-d3631ea6.js";import{_ as y}from"./index-a51c96a6.js";import{S as w}from"./sweetalert2.all-0db675b4.js";import{c as V}from"./serviceApi-ca70888b.js";import"./iconBase-12a6ae7e.js";function K(){const D=i.useRef(null),[r,n]=i.useState([]),[t,o]=i.useState([]),[m,x]=i.useState(""),[p,u]=i.useState(""),[h,j]=i.useState(1),[v,f]=i.useState(""),g=I(),[C,{isSuccess:N,isLoading:b}]=V(),A=async s=>{s.preventDefault();const a=new FormData;a.append("title",v),a.append("description",m),a.append("shortDescription",p),a.append("order",h),a.append("image",r[0].file),a.append("icon",t[0].file);try{await C(a).unwrap()}catch{w.fire({icon:"error",title:"",text:"Something went wrong!"})}};return i.useEffect(()=>{N&&(x(""),u(""),f(""),j(1),n([]),o([]),w.fire({icon:"success",title:"",text:"Service Added Successfully"}),g("/admin/services/all-services"))},[N,g]),e.jsxs("section",{children:[e.jsx("div",{className:"p-4 border-b bg-base-100 rounded",children:e.jsx("h1",{className:"font-medium text-neutral",children:"Add Service"})}),e.jsx("div",{className:"bg-base-100",children:e.jsxs("form",{onSubmit:A,className:"p-4",children:[e.jsxs("div",{className:"text-neutral-content grid sm:grid-cols-2 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Order"}),e.jsx("input",{type:"number",name:"order",defaultValue:h,onChange:s=>j(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Icon"}),e.jsx("div",{children:e.jsx(y,{defaultValue:t,onChange:s=>o(s),dataURLKey:"data_url",children:({onImageUpload:s,onImageRemove:a,dragProps:d})=>e.jsxs("div",{className:"border rounded border-dashed p-4",...d,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:s,className:"w-max px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(t==null?void 0:t.length)>0&&"mt-4"} `,children:t==null?void 0:t.map((c,l)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"w-20 h-20"}),e.jsx("div",{onClick:()=>a(l),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx(S,{})})]},l))})]})})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsx("div",{children:e.jsx(y,{defaultValue:r,onChange:s=>n(s),dataURLKey:"data_url",children:({onImageUpload:s,onImageRemove:a,dragProps:d})=>e.jsxs("div",{className:"border rounded border-dashed p-4",...d,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:s,className:"w-max px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(r==null?void 0:r.length)>0&&"mt-4"} `,children:r==null?void 0:r.map((c,l)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"w-20 h-20"}),e.jsx("div",{onClick:()=>a(l),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx(S,{})})]},l))})]})})})]})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Service Title"}),e.jsx("input",{type:"text",name:"serviceTitle",defaultValue:v,onChange:s=>f(s.target.value)})]}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"mb-1",children:"Short Description"}),e.jsx("textarea",{name:"shortDescription",rows:"3",defaultValue:p,onChange:s=>u(s.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Description"}),e.jsx(_,{ref:D,value:m,onBlur:s=>x(s)})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{disabled:b&&"disabled",className:"gradient-primary-btn",children:b?"Loading":"Add Service"})})]})})]})}export{K as default};
