import{r as o,a as C,u as D,j as e}from"./index-d4e5aba6.js";import{a as S}from"./index.esm-d3631ea6.js";import{_ as E}from"./index-a51c96a6.js";import{c as U,d as L}from"./WhyChooseApi-ec29868b.js";import{S as b}from"./sweetalert2.all-0db675b4.js";import"./iconBase-12a6ae7e.js";function q(){var g,N;const[a,m]=o.useState([]),[p,h]=o.useState(""),[u,x]=o.useState(""),y=C(),{id:f}=D(),{data:t,isLoading:d}=U(f),[v,{isLoading:j}]=L();if(o.useEffect(()=>{if(!d&&t){const{title:s,description:i}=t.data;h(s),x(i)}},[t,d]),d)return e.jsx("div",{children:"Loading..."});const w=async s=>{var c,n;s.preventDefault();const i=(c=a[0])==null?void 0:c.file,r=new FormData;r.append("title",p),r.append("description",u),i&&r.append("whyChoose",i);try{const l=await v({id:f,formData:r});(n=l==null?void 0:l.data)!=null&&n.success&&(m([]),b.fire({title:"",text:"Why Choose Updated Successfully!",icon:"success"}),y("/admin/why-choose"))}catch{b.fire({title:"",text:"Something went wrong!",icon:"error"})}};return e.jsxs("section",{children:[e.jsx("div",{className:"p-4 border-b bg-base-100 rounded",children:e.jsx("h1",{className:"font-medium text-neutral",children:"Edit Choose"})}),e.jsx("div",{className:"bg-base-100 rounded mt-2 p-3",children:e.jsxs("form",{className:"md:w-1/2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-neutral-content mb-1",children:["Icon ",e.jsx("small",{children:"(120px/80px)"})]}),e.jsxs("div",{className:"sm:flex items-center gap-4",children:[e.jsx(E,{defaultValue:a,onChange:s=>m(s),dataURLKey:"data_url",children:({onImageUpload:s,onImageRemove:i,dragProps:r})=>e.jsxs("div",{className:"border rounded border-dashed p-4 w-max flex gap-4",...r,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:s,className:"px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(a==null?void 0:a.length)>0&&"mt-4"} `,children:a==null?void 0:a.map((c,n)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"w-16 h-16"}),e.jsx("div",{onClick:()=>i(n),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx(S,{})})]},n))})]})}),((g=t==null?void 0:t.data)==null?void 0:g.icon)&&e.jsx("img",{src:`https://emanager-api.emanagerit.com/whychoose/${(N=t==null?void 0:t.data)==null?void 0:N.icon}`,alt:"",className:"w-10 mt-4"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:p,required:!0,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"mb-1",children:"Description"}),e.jsx("textarea",{name:"description",defaultValue:u,required:!0,rows:5,onChange:s=>x(s.target.value)})]}),e.jsx("div",{className:"mt-5",children:e.jsx("button",{onClick:w,type:"submit",className:"gradient-primary-btn",disabled:j&&"disabled",children:j?"Loading...":"Update"})})]})})]})}export{q as default};
