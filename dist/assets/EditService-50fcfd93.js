import{u as E,r as d,a as V,j as e}from"./index-d4e5aba6.js";import{J as B}from"./jodit-react-3533568c.js";import{a as I}from"./index.esm-d3631ea6.js";import{_ as L}from"./index-a51c96a6.js";import{S as R}from"./sweetalert2.all-0db675b4.js";import{d as T,e as F}from"./serviceApi-ca70888b.js";import{S as J}from"./Spinner-241108b6.js";import"./iconBase-12a6ae7e.js";function Q(){var y,D,w,C;const{slug:m}=E(),U=d.useRef(null),[t,p]=d.useState([]),[i,u]=d.useState([]),[x,h]=d.useState(""),[j,g]=d.useState(""),[v,f]=d.useState(),[N,b]=d.useState(""),_=V(),{data:s,isLoading:o}=T(m),[$,{isLoading:S}]=F();if(d.useEffect(()=>{var r,a,l,c;s!=null&&s.data&&!o&&(f((r=s==null?void 0:s.data)==null?void 0:r.order),b((a=s==null?void 0:s.data)==null?void 0:a.title),h((l=s==null?void 0:s.data)==null?void 0:l.description),g((c=s==null?void 0:s.data)==null?void 0:c.shortDescription))},[s,o]),o)return e.jsx(J,{});const k=async r=>{var l,c;r.preventDefault();const a=new FormData;a.append("title",N),a.append("description",x),a.append("shortDescription",j),a.append("order",v),t.length>0&&a.append("image",(l=t[0])==null?void 0:l.file),i.length>0&&a.append("icon",(c=i[0])==null?void 0:c.file);try{(await $({id:m,formData:a}).unwrap()).success&&(R.fire({icon:"success",title:"",text:"Service Updated Successfully"}),p([]),u([]),_("/admin/services/all-services"))}catch(n){console.log(n)}};return e.jsxs("section",{children:[e.jsx("div",{className:"p-4 border-b bg-base-100 rounded",children:e.jsx("h1",{className:"font-medium text-neutral",children:"Update Service"})}),e.jsx("div",{className:"bg-base-100",children:e.jsxs("form",{className:"p-4",children:[e.jsxs("div",{className:"text-neutral-content grid sm:grid-cols-2 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Order"}),e.jsx("input",{type:"number",name:"order",defaultValue:v,onChange:r=>f(r.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Icon"}),e.jsxs("div",{children:[e.jsx(L,{defaultValue:i,onChange:r=>u(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:a,dragProps:l})=>e.jsxs("div",{className:"border rounded border-dashed p-4",...l,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"w-max px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(i==null?void 0:i.length)>0&&"mt-4"} `,children:i==null?void 0:i.map((c,n)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"w-20 h-20"}),e.jsx("div",{onClick:()=>a(n),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx(I,{})})]},n))})]})}),((y=s==null?void 0:s.data)==null?void 0:y.icon)&&e.jsx("img",{src:`https://emanager-api.emanagerit.com/services/${(D=s==null?void 0:s.data)==null?void 0:D.icon}`,alt:"",className:"w-10 mt-4"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsxs("div",{children:[e.jsx(L,{defaultValue:t,onChange:r=>p(r),dataURLKey:"data_url",children:({onImageUpload:r,onImageRemove:a,dragProps:l})=>e.jsxs("div",{className:"border rounded border-dashed p-4",...l,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:r,className:"w-max px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(t==null?void 0:t.length)>0&&"mt-4"} `,children:t==null?void 0:t.map((c,n)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:c.data_url,alt:"",className:"w-20 h-20"}),e.jsx("div",{onClick:()=>a(n),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx(I,{})})]},n))})]})}),((w=s==null?void 0:s.data)==null?void 0:w.image)&&e.jsx("img",{src:`https://emanager-api.emanagerit.com/services/${(C=s==null?void 0:s.data)==null?void 0:C.image}`,alt:"",className:"w-32 mt-4"})]})]})]}),e.jsxs("div",{className:"md:col-span-2 flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Service Title"}),e.jsx("input",{type:"text",name:"serviceTitle",defaultValue:N,onChange:r=>b(r.target.value)})]}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"font-medium mb-1",children:"Short Description*"}),e.jsx("textarea",{name:"shortDescription",rows:"3",defaultValue:j,onChange:r=>g(r.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Description"}),e.jsx(B,{ref:U,value:x,onBlur:r=>h(r)})]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{disabled:S&&"disabled",className:"gradient-primary-btn",onClick:k,children:S?"Loading":"Update Service"})})]})})]})}export{Q as default};
