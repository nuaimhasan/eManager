import{b,j as e}from"./index-d4e5aba6.js";import{S as o}from"./sweetalert2.all-0db675b4.js";import{S as j}from"./Spinner-241108b6.js";const r="blogSection",y=b.injectEndpoints({endpoints:t=>({getBlogSection:t.query({query:()=>({url:`${r}`,method:"GET"}),providesTags:["blogSection"]}),updateBlogSectionById:t.mutation({query:({id:s,body:a})=>({url:`${r}/${s}`,method:"PATCH",body:a}),invalidatesTags:["blogSection"]}),addBlogSection:t.mutation({query:s=>({url:`${r}/add`,method:"POST",body:s}),invalidatesTags:["blogSection"]})})}),{useGetBlogSectionQuery:B,useUpdateBlogSectionByIdMutation:v,useAddBlogSectionMutation:w}=y;function A(){var p;const{data:t,isLoading:s}=B(),[a,{isLoading:l}]=v(),[m,{isLoading:u}]=w();if(s)return e.jsx(j,{});const c=(p=t==null?void 0:t.data[0])==null?void 0:p._id,i=t==null?void 0:t.data[0],S=async n=>{n.preventDefault();const x=n.target.title.value,f=n.target.subTitle.value,h=n.target.description.value,g={title:x,subtitle:f,description:h};if(c)try{(await a({id:c,body:g}).unwrap()).success&&o.fire({icon:"success",title:"",text:"Blog Section Updated Successfully"})}catch{o.fire({icon:"error",title:"",text:"Something went wrong!"})}else try{(await m(g).unwrap()).success&&o.fire({icon:"success",title:"Blog Section Added Successfully"})}catch{o.fire({icon:"error",title:"",text:"Something went wrong!"})}};return e.jsxs("section",{className:"bg-base-100 rounded shadow",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-medium text-neutral",children:"Blog Section Seting"})}),e.jsxs("form",{className:"flex flex-col gap-3 p-4 md:w-1/2",onSubmit:S,children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:i==null?void 0:i.title})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Sub Title"}),e.jsx("input",{type:"text",name:"subTitle",defaultValue:i==null?void 0:i.subtitle})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Description"}),e.jsx("textarea",{name:"description",rows:"3",defaultValue:i==null?void 0:i.description})]}),e.jsx("div",{children:e.jsx("button",{disabled:(l||u)&&"disabled",className:"gradient-primary-btn",children:l||u?"Loading...":c?"Update":"Add"})})]})]})}export{A as default};
