import{r as n,j as e}from"./index-d4e5aba6.js";import{J as V}from"./jodit-react-3533568c.js";import{a as $}from"./index.esm-d3631ea6.js";import{_ as F}from"./index-a51c96a6.js";import{S as o}from"./sweetalert2.all-0db675b4.js";import{S as J}from"./Spinner-241108b6.js";import{u as M,a as B,b as G}from"./aboutUsApi-a2fabc5a.js";import"./iconBase-12a6ae7e.js";function Y(){var A,D,C,S,L,_,U;const I=n.useRef(null),T={uploader:{url:"https://xdsoft.net/jodit/finder/?action=fileUpload"}},{data:s,isLoading:p}=M(),[k,{isLoading:h}]=B(),[P,{isLoading:j}]=G(),[r,m]=n.useState([]),[g,b]=n.useState(""),[N,v]=n.useState(""),[y,w]=n.useState(""),[u,f]=n.useState("");if(n.useEffect(()=>{if(s&&!p){const t=s.data[0];b(t==null?void 0:t.title),v(t==null?void 0:t.tagline),w(t==null?void 0:t.description)}},[s,p]),p)return e.jsx(J,{});const x=(A=s==null?void 0:s.data[0])==null?void 0:A._id,R=async t=>{var d,c,E;t.preventDefault();const l=(d=r[0])==null?void 0:d.file,i=new FormData;if(i.append("title",g),i.append("tagline",N),i.append("description",y),!x&&(!u||!l))return o.fire("","Please upload profile and image","error");if(u&&i.append("profileDoc",u),l&&i.append("image",l),x)try{const a=await k({id:x,formData:i}).unwrap();a!=null&&a.success&&(m([]),f(""),o.fire("","update success","success"))}catch(a){o.fire("",(c=a==null?void 0:a.data)==null?void 0:c.error,"error")}else try{const a=await P(i).unwrap();a!=null&&a.success&&(m([]),f(""),o.fire("","About add success","success"))}catch(a){o.fire("",(E=a==null?void 0:a.data)==null?void 0:E.error,"error")}};return e.jsxs("section",{className:"bg-base-100 rounded shadow",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx("h3",{className:"font-medium text-neutral",children:"About Info"})}),e.jsxs("form",{className:"p-4",children:[e.jsxs("div",{className:"text-neutral-content grid sm:grid-cols-2 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Title"}),e.jsx("input",{type:"text",name:"title",defaultValue:g,onChange:t=>b(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Tagline"}),e.jsx("input",{type:"text",name:"tagline",defaultValue:N,onChange:t=>v(t.target.value)})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"mb-1",children:["Profile - ",e.jsx("small",{children:"(only pdf)"})]}),e.jsx("input",{type:"file",name:"profile",accept:"application/pdf",onChange:t=>f(t.target.files[0])}),((D=s==null?void 0:s.data[0])==null?void 0:D.profileDoc)&&e.jsx("p",{className:"text-neutral-content",children:(C=s==null?void 0:s.data[0])==null?void 0:C.profileDoc})]}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("p",{className:"mb-1",children:"Image"}),e.jsxs("div",{children:[e.jsx(F,{defaultValue:r,onChange:t=>m(t),dataURLKey:"data_url",children:({onImageUpload:t,onImageRemove:l,dragProps:i})=>e.jsxs("div",{className:"border rounded border-dashed p-4",...i,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{onClick:t,className:"w-max px-4 py-1.5 rounded-2xl text-base-100 bg-primary cursor-pointer text-sm",children:"Choose Image"}),e.jsx("p",{className:"text-neutral-content",children:"or Drop here"})]}),e.jsx("div",{className:`${(r==null?void 0:r.length)>0&&"mt-4"} `,children:r==null?void 0:r.map((d,c)=>e.jsxs("div",{className:"image-item relative",children:[e.jsx("img",{src:d.data_url,alt:"",className:"w-20 h-20"}),e.jsx("div",{onClick:()=>l(c),className:"w-7 h-7 bg-primary rounded-full flex justify-center items-center text-base-100 absolute top-0 right-0 cursor-pointer",children:e.jsx($,{})})]},c))})]})}),(s==null?void 0:s.success)&&e.jsx("img",{src:`https://emanager-api.emanagerit.com/aboutus/${(S=s==null?void 0:s.data[0])==null?void 0:S.image}`,alt:"",className:"w-32 mt-4"})]})]})})]}),e.jsxs("div",{className:"md:col-span-2 border rounded",children:[e.jsx("p",{className:"border-b p-3",children:"Description"}),e.jsx("div",{className:"p-4 about_details",children:e.jsx(V,{ref:I,config:T,value:((_=(L=s==null?void 0:s.data[0])==null?void 0:L.description)==null?void 0:_.length)>0?(U=s==null?void 0:s.data[0])==null?void 0:U.description:y,onBlur:t=>w(t)})})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{disabled:(h||j)&&"disabled",className:"gradient-primary-btn",onClick:R,children:h||j?"Loading..":"Update About"})})]})]})}export{Y as default};
