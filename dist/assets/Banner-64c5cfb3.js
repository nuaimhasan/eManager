import{r as I,j as e}from"./index-d4e5aba6.js";import{u as A,a as U,b as q}from"./bannerApi-87033442.js";import{S as v}from"./sweetalert2.all-0db675b4.js";import{S as D}from"./Spinner-241108b6.js";function Q(){var g,B,N,S;const{data:s,isLoading:u,isError:m,error:o}=A(),[w,{isLoading:p,isError:f,error:r,isSuccess:x}]=U(),[y,{isLoading:j,isError:h,error:t,isSuccess:b}]=q(),l=(g=s==null?void 0:s.data[0])==null?void 0:g._id,L=async n=>{n.preventDefault();const d=n.target.title.value,c=n.target.description.value,a={title:d,description:c};l?await w({id:l,banner:a}):await y(a)};I.useEffect(()=>{var n,d,c,a;if(f||h){v.fire("",(n=r==null?void 0:r.data)!=null&&n.error||(d=t==null?void 0:t.data)!=null&&d.error?((c=r==null?void 0:r.data)==null?void 0:c.error)||((a=t==null?void 0:t.data)==null?void 0:a.error):"Something went wrong","error");return}if(x||b){v.fire("","Banner updated successfully","success");return}},[f,r,x,h,t,b]);let i=null;return u?i=e.jsx(D,{}):(m&&(i=e.jsx("p",{className:"p-4 text-red-500",children:(B=o==null?void 0:o.data)==null?void 0:B.error})),!u&&!m&&(s!=null&&s.success)&&(i=e.jsxs("form",{onSubmit:L,className:"p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-1",children:"Title*"}),e.jsx("input",{type:"text",name:"title",defaultValue:(N=s==null?void 0:s.data[0])==null?void 0:N.title,required:!0})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"font-medium mb-1",children:"Description*"}),e.jsx("textarea",{name:"description",rows:"3",defaultValue:(S=s==null?void 0:s.data[0])==null?void 0:S.description,required:!0})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{disabled:(p||j)&&"disabled",className:"gradient-primary-btn",children:p||j?"Loading...":l?"Update Banner":"Add Banner"})})})]})),e.jsxs("section",{className:"bg-base-100 shadow rounded",children:[e.jsx("div",{className:"p-4 border-b text-neutral font-medium flex justify-between items-center",children:e.jsx("h3",{children:"Banner Setting"})}),i]}))}export{Q as default};
